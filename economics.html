<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Business strategy analysis tools and financial calculators">
  <title>Analysis & Tools ‚Äî Tsholo Setati</title>
  <link rel="stylesheet" href="style.css">
  <script src="ui.js" defer></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <!-- Optional if needed by specific scripts -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
  <a href="#main-content" class="skip-link">Skip to main content</a>
  <div id="site-header" role="banner"></div>

  <main id="main-content" class="container content-area">
    <h2>Analysis & Tools</h2>
    <p class="section-subtitle">A comprehensive toolkit for financial planning and strategic business analysis.</p>

    <!-- Category Switcher -->
    <div class="category-switcher" style="display:flex; justify-content:center; gap:20px; margin-bottom:30px;">
      <button class="btn cat-btn active" data-cat="financial-tools">üí∞ Financial Planning</button>
      <button class="btn cat-btn btn-ghost" data-cat="strategic-analysis">üìà Strategic Analysis</button>
    </div>

    <!-- === SECTION: FINANCIAL PLANNING === -->
    <div id="financial-tools" class="tool-category">

      <!-- Sub-Tabs for Financial -->
      <div class="analysis-tabs">
        <button class="tab-button active" onclick="switchFinancialTab('quiz')">üìù Financial Quiz</button>
        <button class="tab-button" onclick="switchFinancialTab('calc-interest')">üí∏ Compound Interest</button>
        <button class="tab-button" onclick="switchFinancialTab('calc-retirement')">üë¥ Retirement</button>
        <button class="tab-button" onclick="switchFinancialTab('calc-loan')">üè¶ Loan Repayment</button>
        <button class="tab-button" onclick="switchFinancialTab('advisor')">ü§ñ Smart Advisor</button>
      </div>

      <!-- Financial Content -->
      <div id="quiz" class="financial-tab active">
        <section class="card">
          <h3>Financial Literacy Quiz</h3>
          <p class="muted">Test your understanding with these key financial questions.</p>
          <form id="quizForm">
            <div class="question-group">
              <h4>Question 1</h4>
              <p>Suppose you need to borrow R100. Which is the lower amount to pay back: R105 or R100 plus three
                percent?</p>
              <div class="options">
                <label class="option-label"><input type="radio" name="q1" value="R105" required>
                  <span>R105</span></label>
                <label class="option-label"><input type="radio" name="q1" value="R100 plus three percent"> <span>R100
                    plus three percent</span></label>
              </div>
            </div>
            <!-- Additional questions simplified for brevity but fully functional in script.js logic -->
            <div class="question-group">
              <h4>Question 2</h4>
              <p>If interest is 1% and inflation is 2%, after one year can you buy more or less?</p>
              <div class="options">
                <label class="option-label"><input type="radio" name="q2" value="More"
                    required><span>More</span></label>
                <label class="option-label"><input type="radio" name="q2" value="The same"><span>The same</span></label>
                <label class="option-label"><input type="radio" name="q2" value="Less"><span>Less</span></label>
              </div>
            </div>
            <div class="question-group">
              <h4>Question 3</h4>
              <p>If savings interest is 15% and inflation is 19%, after one year can you buy more or less?</p>
              <div class="options">
                <label class="option-label"><input type="radio" name="q3" value="More"
                    required><span>More</span></label>
                <label class="option-label"><input type="radio" name="q3" value="The same"><span>The same</span></label>
                <label class="option-label"><input type="radio" name="q3" value="Less"><span>Less</span></label>
              </div>
            </div>
            <div class="question-group">
              <h4>Question 4</h4>
              <p>R100 savings + 10% interest per year. After 2 years: more or less than R120?</p>
              <div class="options">
                <label class="option-label"><input type="radio" name="q4" value="More than R120"
                    required><span>More</span></label>
                <label class="option-label"><input type="radio" name="q4"
                    value="Exactly R120"><span>Exactly</span></label>
                <label class="option-label"><input type="radio" name="q4"
                    value="Less than R120"><span>Less</span></label>
              </div>
            </div>
            <button type="submit" class="btn-primary">Submit Quiz</button>
          </form>
          <div id="quizResult"></div>
        </section>
      </div>

      <div id="calc-interest" class="financial-tab" style="display:none;">
        <section class="card calculator-card">
          <h3>Compound Interest Calculator</h3>
          <form id="interestForm" class="calculator-form">
            <div class="form-group">
              <label for="principal">Principal Amount (R)</label>
              <input type="number" id="principal" placeholder="10000" required>
            </div>
            <div class="form-group">
              <label for="rate">Annual Interest Rate (%)</label>
              <input type="number" step="0.01" id="rate" placeholder="7.5" required>
            </div>
            <div class="form-group">
              <label for="time">Time Period (Years)</label>
              <input type="number" id="time" placeholder="10" required>
            </div>
            <div class="form-group">
              <label for="compound">Compounding Frequency</label>
              <select id="compound">
                <option value="1">Annually</option>
                <option value="4">Quarterly</option>
                <option value="12" selected>Monthly</option>
              </select>
            </div>
            <button type="submit" class="btn-primary">Calculate</button>
          </form>
          <div id="interestResult" class="result-box"></div>
          <canvas id="chartContainer"></canvas>
        </section>
      </div>

      <div id="calc-retirement" class="financial-tab" style="display:none;">
        <section class="card calculator-card">
          <h3>Retirement Savings Calculator</h3>
          <form id="retirementForm" class="calculator-form">
            <div class="form-row">
              <div class="form-group"><label>Current Age</label><input type="number" id="currentAge" required></div>
              <div class="form-group"><label>Retirement Age</label><input type="number" id="retirementAge" required>
              </div>
            </div>
            <div class="form-group"><label>Current Savings (R)</label><input type="number" id="currentSavings" required>
            </div>
            <div class="form-group"><label>Monthly Value (R)</label><input type="number" id="monthlyContribution"
                required></div>
            <div class="form-group"><label>Annual Return (%)</label><input type="number" step="0.01" id="annualReturn"
                required></div>
            <button type="submit" class="btn-primary">Project Savings</button>
          </form>
          <div id="retirementResult" class="result-box"></div>
        </section>
      </div>

      <div id="calc-loan" class="financial-tab" style="display:none;">
        <section class="card calculator-card">
          <h3>Loan Repayment Calculator</h3>
          <form id="loanForm" class="calculator-form">
            <div class="form-group"><label>Loan Amount (R)</label><input type="number" id="loanAmount" required></div>
            <div class="form-row">
              <div class="form-group"><label>Interest Rate (%)</label><input type="number" step="0.01" id="loanInterest"
                  required></div>
              <div class="form-group"><label>Term (Years)</label><input type="number" id="loanTerm" required></div>
            </div>
            <button type="submit" class="btn-primary">Calculate Payment</button>
          </form>
          <div id="loanResult" class="result-box"></div>
        </section>
      </div>

      <div id="advisor" class="financial-tab" style="display:none;">
        <section class="card">
          <h3>üí∞ Smart Financial Advisor</h3>
          <form id="advisorForm" class="calculator-form">
            <div class="form-row">
              <div class="form-group"><label>Annual Income (R)</label><input type="number" id="annualIncome" required>
              </div>
              <div class="form-group"><label>Monthly Expenses (R)</label><input type="number" id="monthlyExpenses"
                  required></div>
            </div>
            <div class="form-row">
              <div class="form-group"><label>Age</label><input type="number" id="advAge" required></div>
              <div class="form-group"><label>Total Debt (R)</label><input type="number" id="currentDebt" required></div>
            </div>
            <div class="form-row">
              <div class="form-group"><label>Emergency Fund (R)</label><input type="number" id="emergencyFund" required>
              </div>
              <div class="form-group"><label>Investment Goal (Years)</label><input type="number" id="investmentGoal"
                  required></div>
            </div>
            <button type="submit" class="btn-primary">Get Assessment</button>
          </form>
          <div id="advisorResult" class="result-box"></div>
        </section>
      </div>

    </div>

    <!-- === SECTION: STRATEGIC ANALYSIS === -->
    <div id="strategic-analysis" class="tool-category" style="display:none;">

      <!-- Tool Navigation Tabs -->
      <div class="analysis-tabs">
        <button class="tab-button active" onclick="switchTab('economic')">üìä Economic Dashboard</button>
        <button class="tab-button" onclick="switchTab('porter')">‚öîÔ∏è Porter's 5</button>
        <button class="tab-button" onclick="switchTab('pestel')">üåç PESTEL</button>
        <button class="tab-button" onclick="switchTab('swot')">üéØ SWOT</button>
        <button class="tab-button" onclick="switchTab('segment')">üë• Segmentation</button>
        <button class="tab-button" onclick="switchTab('scenario')">üìà Scenarios</button>
        <button class="tab-button" onclick="switchTab('position')">üé≤ Positioning</button>
        <button class="tab-button" onclick="switchTab('risk')">‚ö†Ô∏è Risk Matrix</button>
      </div>

      <!-- 1. ECONOMIC INDICATORS DASHBOARD -->
      <div id="economic" class="tab-content active">
        <div class="card">
          <h3>üìä Economic Indicators Dashboard</h3>
          <p class="muted">Key macro indicators for the South African context.</p>
          <div class="dashboard-grid">
            <div class="indicator-card">
              <div class="indicator-label">SA Inflation</div>
              <div class="indicator-value">6.2%</div>
              <div class="indicator-meta">Year-over-year</div>
            </div>
            <div class="indicator-card">
              <div class="indicator-label">Unemployment</div>
              <div class="indicator-value">32.1%</div>
              <div class="indicator-meta">Official rate</div>
            </div>
            <div class="indicator-card">
              <div class="indicator-label">Prime Rate</div>
              <div class="indicator-value">11.75%</div>
              <div class="indicator-meta">SARB Base</div>
            </div>
            <div class="indicator-card">
              <div class="indicator-label">ZAR/USD</div>
              <div class="indicator-value">18.50</div>
              <div class="indicator-meta">Spot rate</div>
            </div>
          </div>
          <div class="economic-insight">
            <h4>üìà Snapshot</h4>
            <p>Moderate expansion despite volatility. Inflation stabilizing.</p>
          </div>
        </div>
      </div>

      <!-- 2. PORTER'S 5 FORCES -->
      <div id="porter" class="tab-content">
        <div class="card">
          <h3>‚öîÔ∏è Porter's 5 Forces</h3>
          <form id="porterForm" class="analysis-form">
            <div class="form-grid-2">
              <div class="form-group"><label>Supplier Power (1-5)</label><input type="range" id="suppliers" min="1"
                  max="5" value="3" class="slider"><span id="suppliersValue">3</span></div>
              <div class="form-group"><label>Buyer Power (1-5)</label><input type="range" id="buyers" min="1" max="5"
                  value="3" class="slider"><span id="buyersValue">3</span></div>
              <div class="form-group"><label>Substitutes (1-5)</label><input type="range" id="substitutes" min="1"
                  max="5" value="3" class="slider"><span id="substitutesValue">3</span></div>
              <div class="form-group"><label>New Entrants (1-5)</label><input type="range" id="entrants" min="1" max="5"
                  value="3" class="slider"><span id="entrantsValue">3</span></div>
              <div class="form-group"><label>Rivalry (1-5)</label><input type="range" id="rivalry" min="1" max="5"
                  value="3" class="slider"><span id="rivalryValue">3</span></div>
            </div>
            <button type="submit" class="btn-primary">Analyze</button>
          </form>
          <div id="porterResult" class="result-box" style="display:none;">
            <h4>Attractiveness Score</h4>
            <div class="score" id="porterScore"></div>
            <div id="porterBreakdown"></div>
          </div>
        </div>
      </div>

      <!-- 3. PESTEL -->
      <div id="pestel" class="tab-content">
        <div class="card">
          <h3>üåç PESTEL Analysis</h3>
          <form id="pestelForm" class="analysis-form">
            <div class="pestel-grid">
              <div class="pestel-factor">
                <h4>Political</h4><textarea></textarea><select class="impact-select">
                  <option>Medium</option>
                  <option>High</option>
                  <option>Low</option>
                </select>
              </div>
              <div class="pestel-factor">
                <h4>Economic</h4><textarea></textarea><select class="impact-select">
                  <option>Medium</option>
                  <option>High</option>
                  <option>Low</option>
                </select>
              </div>
              <div class="pestel-factor">
                <h4>Social</h4><textarea></textarea><select class="impact-select">
                  <option>Medium</option>
                  <option>High</option>
                  <option>Low</option>
                </select>
              </div>
              <div class="pestel-factor">
                <h4>Technological</h4><textarea></textarea><select class="impact-select">
                  <option>Medium</option>
                  <option>High</option>
                  <option>Low</option>
                </select>
              </div>
              <div class="pestel-factor">
                <h4>Environmental</h4><textarea></textarea><select class="impact-select">
                  <option>Medium</option>
                  <option>High</option>
                  <option>Low</option>
                </select>
              </div>
              <div class="pestel-factor">
                <h4>Legal</h4><textarea></textarea><select class="impact-select">
                  <option>Medium</option>
                  <option>High</option>
                  <option>Low</option>
                </select>
              </div>
            </div>
            <button type="submit" class="btn-primary">Generate Report</button>
          </form>
          <div id="pestelResult" class="result-box" style="display:none;">
            <div id="pestelBreakdown"></div>
          </div>
        </div>
      </div>

      <!-- 4. SWOT -->
      <div id="swot" class="tab-content">
        <div class="card">
          <h3>üéØ SWOT Analysis</h3>
          <form id="swotForm" class="analysis-form">
            <div class="swot-grid">
              <div class="swot-section positive">
                <h4>Strengths</h4><textarea id="strengths" rows="4"></textarea>
              </div>
              <div class="swot-section negative">
                <h4>Weaknesses</h4><textarea id="weaknesses" rows="4"></textarea>
              </div>
              <div class="swot-section positive">
                <h4>Opportunities</h4><textarea id="opportunities" rows="4"></textarea>
              </div>
              <div class="swot-section negative">
                <h4>Threats</h4><textarea id="threats" rows="4"></textarea>
              </div>
            </div>
            <button type="submit" class="btn-primary">Generate Matrix</button>
          </form>
          <div id="swotResult" class="result-box" style="display:none;">
            <div id="swotBreakdown"></div>
          </div>
        </div>
      </div>

      <!-- 5. SEGMENTATION -->
      <div id="segment" class="tab-content">
        <div class="card">
          <h3>üë• Market Segmentation</h3>
          <form id="segmentForm" class="analysis-form">
            <div class="segment-inputs">
              <input type="text" id="seg1Name" value="Enterprise"><input type="text" id="seg1Desc"
                value="Large corp"><select id="seg1Attract">
                <option>High</option>
              </select><input type="number" id="seg1Size" value="35">
              <input type="text" id="seg2Name" value="Mid-Market"><input type="text" id="seg2Desc"
                value="Growing"><select id="seg2Attract">
                <option>Medium</option>
              </select><input type="number" id="seg2Size" value="40">
              <input type="text" id="seg3Name" value="SME"><input type="text" id="seg3Desc" value="Budget"><select
                id="seg3Attract">
                <option>Low</option>
              </select><input type="number" id="seg3Size" value="25">
            </div>
            <button type="submit" class="btn-primary">Analyze</button>
          </form>
          <div id="segmentResult" class="result-box" style="display:none;">
            <div id="segmentBreakdown"></div>
          </div>
        </div>
      </div>

      <!-- 6. SCENARIO PLANNING -->
      <div id="scenario" class="tab-content">
        <div class="card">
          <h3>üìà Scenario Planner</h3>
          <form id="scenarioForm" class="analysis-form">
            <div class="form-grid-2">
              <div class="form-group"><label>Investment (R)</label><input type="number" id="investment" value="500000">
              </div>
              <div class="form-group"><label>Revenue Y1 (R)</label><input type="number" id="revenue" value="200000">
              </div>
              <div class="form-group"><label>Margin (%)</label><input type="number" id="margin" value="30"></div>
              <div class="form-group"><label>Growth (%)</label><input type="number" id="growth" value="25"></div>
              <div class="form-group"><label>Years</label><input type="number" id="years" value="5"></div>
              <div class="form-group"><label>Discount (%)</label><input type="number" id="discount" value="12"></div>
            </div>
            <button type="submit" class="btn-primary">Generate Scenarios</button>
          </form>
          <div id="scenarioResult" class="result-box" style="display:none;">
            <div id="scenarioBreakdown"></div>
          </div>
        </div>
      </div>

      <!-- 7. POSITIONING -->
      <div id="position" class="tab-content">
        <div class="card">
          <h3>üé≤ Positioning Map</h3>
          <form id="positionForm" class="analysis-form">
            <div class="form-grid-2">
              <div class="form-group"><label>X-Axis</label><input type="text" id="xAttr" value="Price"></div>
              <div class="form-group"><label>Y-Axis</label><input type="text" id="yAttr" value="Quality"></div>
            </div>
            <div class="competitors-input">
              <div class="competitor-entry"><input type="text" value="Comp A"><input type="number" value="3"><input
                  type="number" value="7"><input type="color" value="#0ea5e9"></div>
              <div class="competitor-entry"><input type="text" value="Comp B"><input type="number" value="7"><input
                  type="number" value="4"><input type="color" value="#8b5cf6"></div>
            </div>
            <button type="submit" class="btn-primary">Draw Map</button>
          </form>
          <div id="positionResult" class="result-box" style="display:none;"><canvas id="positionCanvas"></canvas>
            <div id="positionInsights"></div>
          </div>
        </div>
      </div>

      <!-- 8. RISK -->
      <div id="risk" class="tab-content">
        <div class="card">
          <h3>‚ö†Ô∏è Risk Matrix</h3>
          <form id="riskForm" class="analysis-form">
            <div class="risk-inputs">
              <div class="risk-entry"><input type="text" value="Competition"><select>
                  <option>Medium</option>
                </select><select>
                  <option>High</option>
                </select><input type="text" value="Innovate"></div>
              <div class="risk-entry"><input type="text" value="Regulation"><select>
                  <option>Medium</option>
                </select><select>
                  <option>Low</option>
                </select><input type="text" value="Monitor"></div>
            </div>
            <button type="submit" class="btn-primary">Assess Risk</button>
          </form>
          <div id="riskResult" class="result-box" style="display:none;"><canvas id="riskCanvas"></canvas>
            <div id="riskPriorities"></div>
          </div>
        </div>
      </div>

    </div>

  </main>

  <div id="site-footer" role="contentinfo"></div>
  <script src="stock-data.js"></script>
  <script src="script.js"></script>
  <script src="analysis-tools.js"></script>

  <script>
    // Category Switcher Logic (Simple inline script for UI toggling)
    document.addEventListener('DOMContentLoaded', () => {
      const catBtns = document.querySelectorAll('.cat-btn');
      const cats = document.querySelectorAll('.tool-category');

      catBtns.forEach(btn => {
        btn.addEventListener('click', () => {
          // Toggle buttons
          catBtns.forEach(b => {
            b.classList.remove('active');
            b.classList.add('btn-ghost');
          });
          btn.classList.add('active');
          btn.classList.remove('btn-ghost');

          // Show category
          const target = btn.dataset.cat;
          cats.forEach(c => {
            c.style.display = c.id === target ? 'block' : 'none';
          });
        });
      });
    });

    // Sub-tab logic for Financial Tools
    function switchFinancialTab(tabId) {
      document.querySelectorAll('#financial-tools .financial-tab').forEach(el => el.style.display = 'none');
      document.querySelectorAll('#financial-tools .financial-tab').forEach(el => el.classList.remove('active'));

      const target = document.getElementById(tabId);
      if (target) {
        target.style.display = 'block';
        target.classList.add('active');
      }

      // Update buttons
      document.querySelectorAll('#financial-tools .tab-button').forEach(btn => {
        btn.classList.remove('active');
        if (btn.getAttribute('onclick').includes(tabId)) btn.classList.add('active');
      });
    }
  </script>
</body>

</html>