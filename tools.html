<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Financial calculators, retirement planning tools, and a financial literacy quiz">
  <title>Tools ‚Äî Tsholo Setati</title>
  <link rel="stylesheet" href="style.css">
  <script src="ui.js" defer></script>
</head>
<body>
  <a href="#main-content" class="skip-link">Skip to main content</a>
  <div id="site-header" role="banner"></div>

  <main id="main-content" class="container content-area">
    <h2>Tools & Calculators</h2>

    <section class="card">
      <h3>Financial Literacy Quiz</h3>
      <p class="muted">Test your financial understanding with these 4 questions. All questions use R currency.</p>
      <form id="quizForm">
        <div class="question-group">
          <h4>Question 1</h4>
          <p>Suppose you need to borrow R100. Which is the lower amount to pay back: R105 or R100 plus three percent?</p>
          <div class="options">
            <label class="option-label">
              <input type="radio" name="q1" value="R105" required>
              <span>R105</span>
            </label>
            <label class="option-label">
              <input type="radio" name="q1" value="R100 plus three percent">
              <span>R100 plus three percent</span>
            </label>
          </div>
        </div>

        <div class="question-group">
          <h4>Question 2</h4>
          <p>If the interest rate on your savings account was 1% per year and inflation was 2% per year, after one year would you be able to buy more, the same, or less with the money than today?</p>
          <div class="options">
            <label class="option-label">
              <input type="radio" name="q2" value="More" required>
              <span>More</span>
            </label>
            <label class="option-label">
              <input type="radio" name="q2" value="The same">
              <span>The same</span>
            </label>
            <label class="option-label">
              <input type="radio" name="q2" value="Less">
              <span>Less</span>
            </label>
          </div>
        </div>

        <div class="question-group">
          <h4>Question 3</h4>
          <p>Imagine that the interest rate on your savings account was 15% per year and inflation was 19% per year. After one year, would you be able to buy more, the same, or less with the money than today?</p>
          <div class="options">
            <label class="option-label">
              <input type="radio" name="q3" value="More" required>
              <span>More</span>
            </label>
            <label class="option-label">
              <input type="radio" name="q3" value="The same">
              <span>The same</span>
            </label>
            <label class="option-label">
              <input type="radio" name="q3" value="Less">
              <span>Less</span>
            </label>
          </div>
        </div>

        <div class="question-group">
          <h4>Question 4</h4>
          <p>Suppose you had R100 in a savings account and the bank adds 10% per year to the account. How much would you have in the account after two years: more or less than R120?</p>
          <div class="options">
            <label class="option-label">
              <input type="radio" name="q4" value="More than R120" required>
              <span>More than R120</span>
            </label>
            <label class="option-label">
              <input type="radio" name="q4" value="Exactly R120">
              <span>Exactly R120</span>
            </label>
            <label class="option-label">
              <input type="radio" name="q4" value="Less than R120">
              <span>Less than R120</span>
            </label>
          </div>
        </div>

        <button type="submit" class="btn-primary">Submit Quiz</button>
      </form>
      <div id="quizResult"></div>
    </section>

    <section class="card calculator-card">
      <h3>Compound Interest Calculator</h3>
      <p class="muted">See how your investment grows over time with compound interest.</p>
      <form id="interestForm" class="calculator-form">
        <div class="form-group">
          <label for="principal">Principal Amount (R)</label>
          <input type="number" id="principal" placeholder="e.g. 10000" required>
        </div>
        <div class="form-group">
          <label for="rate">Annual Interest Rate (%)</label>
          <input type="number" step="0.01" id="rate" placeholder="e.g. 7.5" required>
        </div>
        <div class="form-group">
          <label for="time">Time Period (Years)</label>
          <input type="number" id="time" placeholder="e.g. 10" required>
        </div>
        <div class="form-group">
          <label for="compound">Compounding Frequency</label>
          <select id="compound">
            <option value="1">Annually</option>
            <option value="2">Semi-Annually</option>
            <option value="4">Quarterly</option>
            <option value="12" selected>Monthly</option>
          </select>
        </div>
        <button type="submit" class="btn-primary">Calculate Growth</button>
      </form>
      <div id="interestResult" class="result-box"></div>
      <canvas id="chartContainer"></canvas>
    </section>

    <section class="card calculator-card">
      <h3>Retirement Savings Calculator</h3>
      <p class="muted">Plan your retirement by projecting your savings growth.</p>
      <form id="retirementForm" class="calculator-form">
        <div class="form-row">
          <div class="form-group">
            <label for="currentAge">Current Age</label>
            <input type="number" id="currentAge" placeholder="e.g. 35" required>
          </div>
          <div class="form-group">
            <label for="retirementAge">Retirement Age</label>
            <input type="number" id="retirementAge" placeholder="e.g. 65" required>
          </div>
        </div>
        <div class="form-group">
          <label for="currentSavings">Current Savings (R)</label>
          <input type="number" id="currentSavings" placeholder="e.g. 50000" required>
        </div>
        <div class="form-group">
          <label for="monthlyContribution">Monthly Contribution (R)</label>
          <input type="number" id="monthlyContribution" placeholder="e.g. 2000" required>
        </div>
        <div class="form-group">
          <label for="annualReturn">Annual Return Rate (%)</label>
          <input type="number" step="0.01" id="annualReturn" placeholder="e.g. 8.5" required>
        </div>
        <button type="submit" class="btn-primary">Project Retirement</button>
      </form>
      <div id="retirementResult" class="result-box"></div>
    </section>

    <section class="card calculator-card">
      <h3>Loan Repayment Calculator</h3>
      <p class="muted">Calculate your monthly loan payment with interest.</p>
      <form id="loanForm" class="calculator-form">
        <div class="form-group">
          <label for="loanAmount">Loan Amount (R)</label>
          <input type="number" id="loanAmount" placeholder="e.g. 500000" required>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label for="loanInterest">Interest Rate (%)</label>
            <input type="number" step="0.01" id="loanInterest" placeholder="e.g. 9.5" required>
          </div>
          <div class="form-group">
            <label for="loanTerm">Loan Term (Years)</label>
            <input type="number" id="loanTerm" placeholder="e.g. 20" required>
          </div>
        </div>
        <button type="submit" class="btn-primary">Calculate Payment</button>
      </form>
      <div id="loanResult" class="result-box"></div>
    </section>

    <section class="card">
      <h3>üí∞ Smart Financial Advisor</h3>
      <p class="muted">Get personalized financial health assessment and investment recommendations based on your profile.</p>
      <form id="advisorForm" class="calculator-form">
        <div class="form-row">
          <div class="form-group">
            <label for="annualIncome">Annual Income (R)</label>
            <input type="number" id="annualIncome" placeholder="e.g. 600000" required>
          </div>
          <div class="form-group">
            <label for="monthlyExpenses">Monthly Expenses (R)</label>
            <input type="number" id="monthlyExpenses" placeholder="e.g. 15000" required>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label for="advAge">Age</label>
            <input type="number" id="advAge" placeholder="e.g. 35" required>
          </div>
          <div class="form-group">
            <label for="currentDebt">Total Debt (R)</label>
            <input type="number" id="currentDebt" placeholder="e.g. 100000" required>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label for="emergencyFund">Emergency Savings (R)</label>
            <input type="number" id="emergencyFund" placeholder="e.g. 30000" required>
          </div>
          <div class="form-group">
            <label for="investmentGoal">Investment Goal (Years)</label>
            <input type="number" id="investmentGoal" placeholder="e.g. 20" required>
          </div>
        </div>
        <button type="submit" class="btn-primary">Get Financial Assessment</button>
      </form>
      <div id="advisorResult" class="result-box"></div>
    </section>

    <section class="card">
      <h3>üìä Economic Indicators Dashboard</h3>
      <p class="muted">Monitor SA and global economic health with key indicators and market performance.</p>
      
      <div class="dashboard-grid">
        <div class="indicator-card">
          <div class="indicator-label">SA Inflation Rate</div>
          <div class="indicator-value">6.2%</div>
          <div class="indicator-meta">Year-over-year</div>
        </div>
        
        <div class="indicator-card">
          <div class="indicator-label">Unemployment (SA)</div>
          <div class="indicator-value">32.1%</div>
          <div class="indicator-meta">Official rate</div>
        </div>
        
        <div class="indicator-card">
          <div class="indicator-label">Prime Lending Rate</div>
          <div class="indicator-value">11.75%</div>
          <div class="indicator-meta">SARB Base Rate</div>
        </div>
        
        <div class="indicator-card">
          <div class="indicator-label">ZAR/USD</div>
          <div class="indicator-value">18.50</div>
          <div class="indicator-meta">Spot rate</div>
        </div>

        <div class="indicator-card">
          <div class="indicator-label">JSE All Share</div>
          <div class="indicator-value">‚Üë 0.8%</div>
          <div class="indicator-meta">Today</div>
        </div>

        <div class="indicator-card">
          <div class="indicator-label">Business Cycle</div>
          <div class="indicator-value">Expansion</div>
          <div class="indicator-meta">Moderate growth</div>
        </div>
      </div>

      <div class="economic-insight">
        <h4>üìà Current Economic Context</h4>
        <p>The SA economy is in a moderate expansion phase with inflation stabilizing but unemployment remaining elevated. Global markets show resilience with tech stocks leading. Commodity prices (oil, metals) remain volatile, impacting the JSE.</p>
      </div>
    </section>

  </main>

  <!-- Market Data Sections -->
  <section class="container content-area">
    <div class="card">
      <h3>üáøüá¶ JSE Market Snapshot</h3>
      <p class="muted">Real-time data from South African stock exchange (updated daily)</p>
      <div id="jseStocks" class="stocks-grid">
        <div class="stock-card loading">Loading market data...</div>
      </div>
    </div>

    <div class="card">
      <h3>üåç Global Markets</h3>
      <p class="muted">International indices and commodities (updated daily)</p>
      <div id="globalMarkets" class="stocks-grid">
        <div class="stock-card loading">Loading global data...</div>
      </div>
    </div>
  </section>

  <div id="site-footer" role="contentinfo"></div>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="stock-data.js"></script>
  <script src="script.js"></script>
  
  <script>
    // Load and display market data
    (async () => {
      // JSE Stocks
      const jseStocks = await StockDataModule.getJSEStocks();
      const jseContainer = document.getElementById('jseStocks');
      
      if (jseStocks && jseStocks.length > 0) {
        jseContainer.innerHTML = jseStocks
          .map(stock => StockDataModule.createStockCard(stock))
          .join('');
      } else {
        jseContainer.innerHTML = '<p class="muted">Market data unavailable. Check back later.</p>';
      }

      // Global Markets
      const [sp500, nasdaq] = await Promise.all([
        StockDataModule.getSP500(),
        StockDataModule.getNASDAQ()
      ]);
      
      const globalContainer = document.getElementById('globalMarkets');
      let globalHTML = '';
      
      if (sp500) globalHTML += StockDataModule.createStockCard(sp500);
      if (nasdaq) globalHTML += StockDataModule.createStockCard(nasdaq);
      
      if (globalHTML) {
        globalContainer.innerHTML = globalHTML;
      } else {
        globalContainer.innerHTML = '<p class="muted">Global data unavailable. Check back later.</p>';
      }
    })();
  </script>
</body>
</html>